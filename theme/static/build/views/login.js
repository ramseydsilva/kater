define(["backbone","underscore","text!templates/login.html"],function(t,e,i){return t.View.extend({template:e.template(i),events:{"submit form":"formSubmit"},initialize:function(){this.render()},formSubmit:function(t){var e=this;t.preventDefault(),app.user.fetch({url:"/api/login/",beforeSend:function(t){t.setRequestHeader("Authorization","Basic "+btoa(e.emailInput.val()+":"+e.passwordInput.val()))},success:function(){app.router.navigate("/",!0)},fail:function(){console.log(arguments)}})},render:function(){this.html=$(this.template({})),this.$el.html(this.html),this.emailInput=this.$("#emailInput"),this.passwordInput=this.$("#passwordInput")}})});