define(["core/view","underscore","text!templates/main-cart-item.html"],function(t,e,i){return t.extend({template:e.template(i),tagName:"tr",events:{"click .quantity_arrow_decr":"decrQuantity","click .quantity_arrow_incr":"incrQuantity","change .input-number":"setQuantity","click .remove":"removeItem"},initialize:function(){this.render(),this.model.on("change:quantity",this.changeQuantity,this),this.model.on("remove",this.remove,this)},decrQuantity:function(){var t=parseInt(this.quantityInput.val());t>1&&this.quantityInput.val(t-1).trigger("change")},incrQuantity:function(t){t.preventDefault(),this.quantityInput.val(parseInt(this.quantityInput.val())+1).trigger("change")},setQuantity:function(){var t=parseInt(this.quantityInput.val());t>0&&this.model.set("quantity",t)},removeItem:function(t){t.preventDefault(),this.model.collection.remove(this.model)},changeQuantity:function(){var t=this.model.item.attributes.price*this.model.attributes.quantity;this.quantityInput.val(this.model.attributes.quantity),this.sub_total.text(t)},render:function(){this.html=$(this.template({model:this.model})),this.$el.html(this.html),this.quantityInput=this.$(".input-number"),this.sub_total=this.$(".sub_total")}})});