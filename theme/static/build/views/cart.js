define(["core/view","underscore","text!templates/cart.html"],function(t,e,a){return t.extend({template:e.template(a),events:{},initialize:function(){this.render(),app.cart.items.on("add",this.addToCart,this),app.cart.items.on("change:quantity",this.changeQuantity,this),app.cart.items.on("reset",this.removeAll,this),app.cart.items.on("remove",this.removeFromCart,this),app.cart.on("change:sub_total",this.updateTotal,this)},addToCart:function(t){var e=t.attributes.quantity*t.item.attributes.price;$('<tr class="cart-items" id="'+t.item.id+'"><td>'+t.item.attributes.title+"</td><td>"+t.attributes.quantity+"</td><td>"+t.item.attributes.price+"KD</td><td>"+e+"KD</td></tr>").insertBefore(this.total.parent())},removeFromCart:function(t){this.cartTable.find("#"+t.item.id).remove()},removeAll:function(){this.cartTable.find("tr.cart-items").remove()},changeQuantity:function(t){this.removeFromCart(t),this.addToCart(t)},updateTotal:function(){this.total.text(app.cart.get("sub_total")+"KD")},render:function(){this.html=$(this.template({})),this.$el.html(this.html),this.cartTable=this.$(".cart-table"),this.total=this.$(".total");var t=$(document),e=this.$(".myCartWgt"),a=this.$(".sideBar"),i="hoveradd";sideclassName="sidebarhoverad",$(window).scroll(function(){e.toggleClass(i,t.scrollTop()>=50),a.toggleClass(sideclassName,t.scrollTop()>=50)})}})});