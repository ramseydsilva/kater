define(["core/view","underscore","text!templates/item.html"],function(t,e,i){return t.extend({template:e.template(i),tagName:"tr",events:{"click .quantity_arrow_decr":"decrQuantity","click .quantity_arrow_incr":"incrQuantity","change .input-number":"setQuantity","click .add":"incrQuantity","click .remove":"resetQuantity"},initialize:function(){this.render(),app.cart.items.on("reset",this.resetQuantity,this)},decrQuantity:function(){var t=parseInt(this.quantityInput.val());t>0&&this.quantityInput.val(t-1).trigger("change")},incrQuantity:function(t){t.preventDefault(),this.quantityInput.val(parseInt(this.quantityInput.val())+1).trigger("change")},setQuantity:function(){var t=parseInt(this.quantityInput.val());if(t>0){this.removeBtn.removeClass("hidden");var e=app.cart.items.findWhere({item:this.model.id});e?e.set("quantity",t):app.cart.items.add({item:this.model.id,quantity:t,item_model:this.model},{item:this.model})}else{this.removeBtn.addClass("hidden");var e=app.cart.items.findWhere({item:this.model.id});e&&app.cart.items.remove(e)}},resetQuantity:function(t){t&&t.preventDefault&&t.preventDefault(),this.quantityInput.val(0).trigger("change")},render:function(){this.html=$(this.template({model:this.model})),this.$el.html(this.html),this.quantityInput=this.$(".input-number"),this.removeBtn=this.$(".remove")}})});