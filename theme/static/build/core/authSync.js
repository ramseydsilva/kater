define(["backbone","essentials"],function(e,n){function t(e){var n=null;if(document.cookie&&""!=document.cookie)for(var t=document.cookie.split(";"),o=0;o<t.length;o++){var c=jQuery.trim(t[o]);if(c.substring(0,e.length+1)==e+"="){n=decodeURIComponent(c.substring(e.length+1));break}}return n}var o,c=n.isIE(),r=t("csrftoken"),o=function(n,t,o){return o.headers||(o.headers={}),o.headers["X-CSRFToken"]=r,n?(t||(t={trigger:function(){}},t.toJSON=t.trigger,"boolean"!=typeof o.contentType&&(o.contentType="application/json"),"GET"!=o.type&&(o.data=JSON.stringify(o.data))),"boolean"!=typeof o.cache&&c&&(o.cache=!1),e.sync(n,t,o)):$.ajax(o)},i=e.Collection.extend({sync:o}),a=e.Model.extend({sync:o});return{sync:o,Collection:i,Model:a}});