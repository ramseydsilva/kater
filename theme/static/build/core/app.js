define(["core/component","core/router","underscore"],function(t,o,e){var s=function(t){var s=this;this.$el=t.$el,this.collections=t.collections,this.promises=t.promises,this.user=t.user,this.options=t,this.router=new o,this.events=t.events||{},this.components={},e.forEach(t.components,function(t,o){s.register(o,t)})};return s.prototype.load=function(t){this.components[t].loadView(this)},s.prototype.register=function(o,e){if(this.components[o])return this.components[o];e||(e=this.options[o]);var s=new t(o,e,this.router);this.components[o]=s},s});